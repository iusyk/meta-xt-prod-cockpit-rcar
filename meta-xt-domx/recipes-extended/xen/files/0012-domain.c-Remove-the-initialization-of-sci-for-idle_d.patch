From 387de9cdc08171fe970247c9e59cf54b7b6db934 Mon Sep 17 00:00:00 2001
From: Ihor Usyk <ihor_usyk@epam.com>
Date: Thu, 9 Feb 2023 14:15:55 +0100
Subject: [PATCH 12/18] domain.c: Remove the initialization of sci for
 idle_domain.

Signed-off-by: Ihor Usyk <ihor_usyk@epam.com>
---
 xen/arch/arm/domain.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/xen/arch/arm/domain.c b/xen/arch/arm/domain.c
index 1e571cc9af..f0827caeae 100644
--- a/xen/arch/arm/domain.c
+++ b/xen/arch/arm/domain.c
@@ -767,7 +767,8 @@ int arch_domain_create(struct domain *d,
             BUG();
     }
 
-    if ( config->arch.arm_sci_type != XEN_DOMCTL_CONFIG_ARM_SCI_NONE )
+    if ( !is_idle_domain(d) && 
+            config->arch.arm_sci_type != XEN_DOMCTL_CONFIG_ARM_SCI_NONE )
     {
 	if ( (rc = sci_domain_init(d, config->arch.arm_sci_type,
 		&config->arch)) != 0)
-- 
2.25.1

